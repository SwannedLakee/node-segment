"use strict";
/**
 * Created by user on 2018/2/21/021.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.SubSModule = exports.SModule = void 0;
const debug_1 = require("../util/debug");
class SModule {
    /**
     * @param {Segment} segment 分词接口
     */
    constructor(segment) {
        this.segment = segment;
    }
    _doMethod(fn, target, mods, ...argv) {
        mods.forEach(function (mod) {
            // @ts-ignore
            if (typeof mod._cache == 'function') {
                // @ts-ignore
                mod._cache();
            }
            target = mod[fn](target, ...argv);
        });
        return target;
    }
}
exports.SModule = SModule;
class SubSModule {
    constructor(type, segment, ...argv) {
        if (type) {
            this.type = type;
        }
        if (!this.type) {
            throw new Error();
        }
        if (segment) {
            this.init(segment, ...argv);
            this.inited = true;
        }
    }
    static init(segment, ...argv) {
        // @ts-ignore
        return this._init(this, segment, ...argv);
    }
    static _init(libThis, segment, ...argv) {
        if (!libThis.type) {
            throw new Error();
        }
        let mod = new libThis(libThis.type, segment, ...argv);
        if (!mod.inited) {
            mod.init(segment, ...argv);
            mod.inited = true;
        }
        // @ts-ignore
        return mod;
    }
    init(segment, ...argv) {
        this.segment = segment;
        this.inited = true;
        //this._cache();
        return this;
    }
    _cache(...argv) {
        this._POSTAG = this.segment.POSTAG;
    }
    /**
     * 回傳最簡版的 IWord { w, p, f, s }
     */
    createRawToken(data, ow, attr) {
        // @ts-ignore
        ow = ow || {};
        let nw = {
            w: typeof data.w == 'undefined' ? ow.w : data.w,
            p: typeof data.p == 'undefined' ? ow.p : data.p,
            f: typeof data.f == 'undefined' ? ow.f : data.f,
            s: typeof data.s == 'undefined' ? ow.s : data.s,
        };
        if (attr) {
            this.debugToken(nw, attr);
        }
        return nw;
    }
    createToken(data, skipCheck, attr) {
        let TABLE = this._TABLE;
        if (!skipCheck && TABLE && !(data.w in TABLE)) {
            this.debugToken(data, {
                autoCreate: true,
            });
        }
        // 自動將模組名稱血入 debug 資訊
        if (this.name) {
            attr = Object.assign(attr || {});
            if (!(this.name in attr)) {
                // @ts-ignore
                attr[this.name] = true;
            }
        }
        if (attr) {
            this.debugToken(data, attr);
        }
        return data;
    }
    sliceToken(words, pos, len, data, skipCheck, attr) {
        words.splice(pos, len, this.createToken(data, skipCheck, attr));
        return words;
    }
    debugToken(data, attr, returnToken, ...argv) {
        return debug_1.debugToken(data, attr, returnToken, ...argv);
    }
}
exports.SubSModule = SubSModule;
exports.default = exports;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7O0FBS0gseUNBQTBDO0FBSzFDLE1BQWEsT0FBTztJQUtuQjs7T0FFRztJQUNILFlBQVksT0FBZ0I7UUFFM0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7SUFDeEIsQ0FBQztJQUVTLFNBQVMsQ0FBeUMsRUFBVSxFQUFFLE1BQVcsRUFBRSxJQUFTLEVBQUUsR0FBRyxJQUFJO1FBRXRHLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHO1lBRXpCLGFBQWE7WUFDYixJQUFJLE9BQU8sR0FBRyxDQUFDLE1BQU0sSUFBSSxVQUFVLEVBQ25DO2dCQUNDLGFBQWE7Z0JBQ2IsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDO2FBQ2I7WUFFRCxNQUFNLEdBQUcsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQ25DLENBQUMsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxNQUFNLENBQUM7SUFDZixDQUFDO0NBQ0Q7QUE1QkQsMEJBNEJDO0FBRUQsTUFBYSxVQUFVO0lBa0J0QixZQUFZLElBQW1CLEVBQUUsT0FBaUIsRUFBRSxHQUFHLElBQUk7UUFFMUQsSUFBSSxJQUFJLEVBQ1I7WUFDQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUNqQjtRQUVELElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUNkO1lBQ0MsTUFBTSxJQUFJLEtBQUssRUFBRSxDQUFBO1NBQ2pCO1FBRUQsSUFBSSxPQUFPLEVBQ1g7WUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1NBQ25CO0lBQ0YsQ0FBQztJQUVNLE1BQU0sQ0FBQyxJQUFJLENBQW9DLE9BQWdCLEVBQUUsR0FB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QyxhQUFhO2dCQUNiLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO2FBQ3ZCO1NBQ0Q7UUFFRCxJQUFJLElBQUksRUFDUjtZQUNDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQzVCO1FBRUQsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0lBRVMsVUFBVSxDQUE0QyxLQUFVLEVBQUUsR0FBVyxFQUFFLEdBQVcsRUFBRSxJQUFPLEVBQUUsU0FBbUIsRUFBRSxJQUF5QjtRQUU1SixLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7UUFFaEUsT0FBTyxLQUFLLENBQUM7SUFDZCxDQUFDO0lBRVMsVUFBVSxDQUFpRCxJQUFPLEVBQUUsSUFBeUIsRUFBRSxXQUFrQixFQUFFLEdBQUcsSUFBSTtRQUVuSSxPQUFPLGtCQUFVLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUNyRCxDQUFDO0NBQ0Q7QUE5SUQsZ0NBOElDO0FBdUNELGtCQUFlLE9BQWlDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiAyMDE4LzIvMjEvMDIxLlxuICovXG5cbmltcG9ydCB7IFBPU1RBRyB9IGZyb20gJy4uL1BPU1RBRyc7XG5pbXBvcnQgeyBJRElDVCwgSURJQ1RfQkxBQ0tMSVNULCBJV29yZCwgU2VnbWVudCB9IGZyb20gJy4uL1NlZ21lbnQnO1xuaW1wb3J0IHsgSVdvcmREZWJ1ZywgSVdvcmREZWJ1Z0luZm8gfSBmcm9tICcuLi91dGlsL2luZGV4JztcbmltcG9ydCB7IGRlYnVnVG9rZW4gfSBmcm9tICcuLi91dGlsL2RlYnVnJ1xuaW1wb3J0IHsgRU5VTV9TVUJNT0RTX05BTUUgfSBmcm9tICcuL2luZGV4JztcblxuZXhwb3J0IHR5cGUgSVNNb2R1bGVUeXBlID0gJ29wdGltaXplcicgfCAndG9rZW5pemVyJyB8IHN0cmluZztcblxuZXhwb3J0IGNsYXNzIFNNb2R1bGUgaW1wbGVtZW50cyBJU01vZHVsZVxue1xuXHR0eXBlPzogSVNNb2R1bGVUeXBlO1xuXHRzZWdtZW50OiBTZWdtZW50O1xuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge1NlZ21lbnR9IHNlZ21lbnQg5YiG6K+N5o6l5Y+jXG5cdCAqL1xuXHRjb25zdHJ1Y3RvcihzZWdtZW50OiBTZWdtZW50KVxuXHR7XG5cdFx0dGhpcy5zZWdtZW50ID0gc2VnbWVudDtcblx0fVxuXG5cdHByb3RlY3RlZCBfZG9NZXRob2Q8UyBleHRlbmRzIElXb3JkLCBUIGV4dGVuZHMgSVN1YlNNb2R1bGU+KGZuOiBzdHJpbmcsIHRhcmdldDogU1tdLCBtb2RzOiBUW10sIC4uLmFyZ3YpXG5cdHtcblx0XHRtb2RzLmZvckVhY2goZnVuY3Rpb24gKG1vZClcblx0XHR7XG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRpZiAodHlwZW9mIG1vZC5fY2FjaGUgPT0gJ2Z1bmN0aW9uJylcblx0XHRcdHtcblx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRtb2QuX2NhY2hlKCk7XG5cdFx0XHR9XG5cblx0XHRcdHRhcmdldCA9IG1vZFtmbl0odGFyZ2V0LCAuLi5hcmd2KTtcblx0XHR9KTtcblx0XHRyZXR1cm4gdGFyZ2V0O1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBTdWJTTW9kdWxlIGltcGxlbWVudHMgSVN1YlNNb2R1bGVcbntcblx0cHVibGljIHN0YXRpYyB0eXBlOiBJU01vZHVsZVR5cGU7XG5cdHB1YmxpYyB0eXBlOiBJU01vZHVsZVR5cGU7XG5cdHNlZ21lbnQ6IFNlZ21lbnQ7XG5cblx0cHJpb3JpdHk/OiBudW1iZXI7XG5cblx0aW5pdGVkPzogYm9vbGVhbjtcblxuXHRwdWJsaWMgc3RhdGljIE5BTUU6IHN0cmluZztcblx0cHVibGljIG5hbWU6IHN0cmluZztcblxuXHRwcm90ZWN0ZWQgX1RBQkxFPztcblx0cHJvdGVjdGVkIF9QT1NUQUc/OiB0eXBlb2YgUE9TVEFHO1xuXG5cdHByb3RlY3RlZCBfQkxBQ0tMSVNUPzogSURJQ1RfQkxBQ0tMSVNUO1xuXG5cdGNvbnN0cnVjdG9yKHR5cGU/OiBJU01vZHVsZVR5cGUsIHNlZ21lbnQ/OiBTZWdtZW50LCAuLi5hcmd2KVxuXHR7XG5cdFx0aWYgKHR5cGUpXG5cdFx0e1xuXHRcdFx0dGhpcy50eXBlID0gdHlwZTtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMudHlwZSlcblx0XHR7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoKVxuXHRcdH1cblxuXHRcdGlmIChzZWdtZW50KVxuXHRcdHtcblx0XHRcdHRoaXMuaW5pdChzZWdtZW50LCAuLi5hcmd2KTtcblx0XHRcdHRoaXMuaW5pdGVkID0gdHJ1ZTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGluaXQ8VCBleHRlbmRzIFN1YlNNb2R1bGUgPSBTdWJTTW9kdWxlPihzZWdtZW50OiBTZWdtZW50LCAuLi5hcmd2KTogVFxuXHR7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdHJldHVybiB0aGlzLl9pbml0KHRoaXMsIHNlZ21lbnQsIC4uLmFyZ3YpO1xuXHR9XG5cblx0cHJvdGVjdGVkIHN0YXRpYyBfaW5pdDxUIGV4dGVuZHMgU3ViU01vZHVsZT4obGliVGhpczogSU1vZHVsZVN0YXRpYzxUPiwgc2VnbWVudDogU2VnbWVudCwgLi4uYXJndik6IFRcblx0e1xuXHRcdGlmICghbGliVGhpcy50eXBlKVxuXHRcdHtcblx0XHRcdHRocm93IG5ldyBFcnJvcigpXG5cdFx0fVxuXG5cdFx0bGV0IG1vZCA9IG5ldyBsaWJUaGlzKGxpYlRoaXMudHlwZSwgc2VnbWVudCwgLi4uYXJndik7XG5cblx0XHRpZiAoIW1vZC5pbml0ZWQpXG5cdFx0e1xuXHRcdFx0bW9kLmluaXQoc2VnbWVudCwgLi4uYXJndik7XG5cdFx0XHRtb2QuaW5pdGVkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0cmV0dXJuIG1vZDtcblx0fVxuXG5cdHB1YmxpYyBpbml0KHNlZ21lbnQ6IFNlZ21lbnQsIC4uLmFyZ3YpXG5cdHtcblx0XHR0aGlzLnNlZ21lbnQgPSBzZWdtZW50O1xuXHRcdHRoaXMuaW5pdGVkID0gdHJ1ZTtcblxuXHRcdC8vdGhpcy5fY2FjaGUoKTtcblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0cHJvdGVjdGVkIF9jYWNoZSguLi5hcmd2KVxuXHR7XG5cdFx0dGhpcy5fUE9TVEFHID0gdGhpcy5zZWdtZW50LlBPU1RBRztcblx0fVxuXG5cdC8qKlxuXHQgKiDlm57lgrPmnIDnsKHniYjnmoQgSVdvcmQgeyB3LCBwLCBmLCBzIH1cblx0ICovXG5cdHByb3RlY3RlZCBjcmVhdGVSYXdUb2tlbjxUIGV4dGVuZHMgSVdvcmQsIFUgZXh0ZW5kcyBJV29yZERlYnVnSW5mbyA9IElXb3JkRGVidWdJbmZvPihkYXRhOiBULCBvdz86IFBhcnRpYWw8VCAmIElXb3JkPiwgYXR0cj86IFUgJiBJV29yZERlYnVnSW5mbylcblx0e1xuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHRvdyA9IG93IHx8IHt9O1xuXG5cdFx0bGV0IG53ID0ge1xuXHRcdFx0dzogdHlwZW9mIGRhdGEudyA9PSAndW5kZWZpbmVkJyA/IG93LncgOiBkYXRhLncsXG5cdFx0XHRwOiB0eXBlb2YgZGF0YS5wID09ICd1bmRlZmluZWQnID8gb3cucCA6IGRhdGEucCxcblx0XHRcdGY6IHR5cGVvZiBkYXRhLmYgPT0gJ3VuZGVmaW5lZCcgPyBvdy5mIDogZGF0YS5mLFxuXHRcdFx0czogdHlwZW9mIGRhdGEucyA9PSAndW5kZWZpbmVkJyA/IG93LnMgOiBkYXRhLnMsXG5cdFx0fSBhcyBUO1xuXG5cdFx0aWYgKGF0dHIpXG5cdFx0e1xuXHRcdFx0dGhpcy5kZWJ1Z1Rva2VuKG53LCBhdHRyKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbnc7XG5cdH1cblxuXHRwcm90ZWN0ZWQgY3JlYXRlVG9rZW48VCBleHRlbmRzIElXb3JkLCBVIGV4dGVuZHMgSVdvcmREZWJ1Z0luZm8gPSBJV29yZERlYnVnSW5mbz4oZGF0YTogVCwgc2tpcENoZWNrPzogYm9vbGVhbiwgYXR0cj86IFUgJiBJV29yZERlYnVnSW5mbylcblx0e1xuXHRcdGxldCBUQUJMRSA9IHRoaXMuX1RBQkxFO1xuXG5cdFx0aWYgKCFza2lwQ2hlY2sgJiYgVEFCTEUgJiYgIShkYXRhLncgaW4gVEFCTEUpKVxuXHRcdHtcblx0XHRcdHRoaXMuZGVidWdUb2tlbihkYXRhLCB7XG5cdFx0XHRcdGF1dG9DcmVhdGU6IHRydWUsXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvLyDoh6rli5XlsIfmqKHntYTlkI3nqLHooYDlhaUgZGVidWcg6LOH6KiKXG5cdFx0aWYgKHRoaXMubmFtZSlcblx0XHR7XG5cdFx0XHRhdHRyID0gT2JqZWN0LmFzc2lnbihhdHRyIHx8IHt9KTtcblxuXHRcdFx0aWYgKCEodGhpcy5uYW1lIGluIGF0dHIpKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdGF0dHJbdGhpcy5uYW1lXSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGF0dHIpXG5cdFx0e1xuXHRcdFx0dGhpcy5kZWJ1Z1Rva2VuKGRhdGEsIGF0dHIpO1xuXHRcdH1cblxuXHRcdHJldHVybiBkYXRhO1xuXHR9XG5cblx0cHJvdGVjdGVkIHNsaWNlVG9rZW48VCBleHRlbmRzIElXb3JkLCBVIGV4dGVuZHMgSVdvcmREZWJ1Z0luZm8+KHdvcmRzOiBUW10sIHBvczogbnVtYmVyLCBsZW46IG51bWJlciwgZGF0YTogVCwgc2tpcENoZWNrPzogYm9vbGVhbiwgYXR0cj86IFUgJiBJV29yZERlYnVnSW5mbylcblx0e1xuXHRcdHdvcmRzLnNwbGljZShwb3MsIGxlbiwgdGhpcy5jcmVhdGVUb2tlbihkYXRhLCBza2lwQ2hlY2ssIGF0dHIpKTtcblxuXHRcdHJldHVybiB3b3Jkcztcblx0fVxuXG5cdHByb3RlY3RlZCBkZWJ1Z1Rva2VuPFQgZXh0ZW5kcyBJV29yZERlYnVnLCBVIGV4dGVuZHMgSVdvcmREZWJ1Z0luZm8+KGRhdGE6IFQsIGF0dHI/OiBVICYgSVdvcmREZWJ1Z0luZm8sIHJldHVyblRva2VuPzogdHJ1ZSwgLi4uYXJndilcblx0e1xuXHRcdHJldHVybiBkZWJ1Z1Rva2VuKGRhdGEsIGF0dHIsIHJldHVyblRva2VuLCAuLi5hcmd2KTtcblx0fVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTdWJTTW9kdWxlTWV0aG9kPFQgZXh0ZW5kcyBJV29yZCwgVSBleHRlbmRzIElXb3JkID0gVD5cbntcblx0KHdvcmRzOiBUW10sIC4uLmFyZ3YpOiBVW10sXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVN1YlNNb2R1bGVDcmVhdGU8VCBleHRlbmRzIFN1YlNNb2R1bGUsIFIgZXh0ZW5kcyBTdWJTTW9kdWxlID0gU3ViU01vZHVsZT5cbntcblx0KHNlZ21lbnQ6IFNlZ21lbnQsIC4uLmFyZ3YpOiBUICYgUixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU01vZHVsZVxue1xuXHR0eXBlPzogSVNNb2R1bGVUeXBlLFxuXHRzZWdtZW50OiBTZWdtZW50LFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElNb2R1bGVTdGF0aWM8VCBleHRlbmRzIElTTW9kdWxlIHwgU3ViU01vZHVsZT5cbntcblx0dHlwZTogSVNNb2R1bGVUeXBlO1xuXG5cdG5ldyh0eXBlPzogSVNNb2R1bGVUeXBlLCBzZWdtZW50PzogU2VnbWVudCwgLi4uYXJndik6IFQsXG5cblx0aW5pdChzZWdtZW50OiBTZWdtZW50LCAuLi5hcmd2KTogVCxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU3ViU01vZHVsZVxue1xuXHR0eXBlOiBJU01vZHVsZVR5cGUsXG5cdHNlZ21lbnQ6IFNlZ21lbnQsXG5cblx0bmFtZT86IEVOVU1fU1VCTU9EU19OQU1FIHwgc3RyaW5nO1xuXG5cdHByaW9yaXR5PzogbnVtYmVyO1xuXG5cdGluaXQoc2VnbWVudDogU2VnbWVudCwgLi4uYXJndik6IElTdWJTTW9kdWxlLFxufVxuXG5leHBvcnQgZGVmYXVsdCBleHBvcnRzIGFzIHR5cGVvZiBpbXBvcnQoJy4vbW9kJyk7XG4iXX0=