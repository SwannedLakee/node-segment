"use strict";
/**
 * Created by user on 2018/2/21/021.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const debug_1 = require("../util/debug");
class SModule {
    /**
     * @param {Segment} segment 分词接口
     */
    constructor(segment) {
        this.segment = segment;
    }
    _doMethod(fn, target, mods, ...argv) {
        mods.forEach(function (mod) {
            // @ts-ignore
            if (typeof mod._cache == 'function') {
                // @ts-ignore
                mod._cache();
            }
            target = mod[fn](target, ...argv);
        });
        return target;
    }
}
exports.SModule = SModule;
class SubSModule {
    constructor(type, segment, ...argv) {
        if (type) {
            this.type = type;
        }
        if (!this.type) {
            throw new Error();
        }
        if (segment) {
            this.init(segment, ...argv);
            this.inited = true;
        }
    }
    static init(segment, ...argv) {
        // @ts-ignore
        return this._init(this, segment, ...argv);
    }
    static _init(libThis, segment, ...argv) {
        if (!libThis.type) {
            throw new Error();
        }
        let mod = new libThis(libThis.type, segment, ...argv);
        if (!mod.inited) {
            mod.init(segment, ...argv);
            mod.inited = true;
        }
        // @ts-ignore
        return mod;
    }
    init(segment, ...argv) {
        this.segment = segment;
        this.inited = true;
        //this._cache();
        return this;
    }
    _cache(...argv) {
        this._POSTAG = this.segment.POSTAG;
    }
    /**
     * 回傳最簡版的 IWord { w, p, f, s }
     */
    createRawToken(data, ow, attr) {
        // @ts-ignore
        ow = ow || {};
        let nw = {
            w: typeof data.w == 'undefined' ? ow.w : data.w,
            p: typeof data.p == 'undefined' ? ow.p : data.p,
            f: typeof data.f == 'undefined' ? ow.f : data.f,
            s: typeof data.s == 'undefined' ? ow.s : data.s,
        };
        if (attr) {
            this.debugToken(nw, attr);
        }
        return nw;
    }
    createToken(data, skipCheck, attr) {
        let TABLE = this._TABLE;
        if (!skipCheck && TABLE && !(data.w in TABLE)) {
            this.debugToken(data, {
                autoCreate: true,
            });
        }
        // 自動將模組名稱血入 debug 資訊
        if (this.name) {
            attr = Object.assign(attr || {});
            if (!(this.name in attr)) {
                attr[this.name] = true;
            }
        }
        if (attr) {
            this.debugToken(data, attr);
        }
        return data;
    }
    sliceToken(words, pos, len, data, skipCheck, attr) {
        words.splice(pos, len, this.createToken(data, skipCheck, attr));
        return words;
    }
    debugToken(data, attr, returnToken, ...argv) {
        return debug_1.debugToken(data, attr, returnToken, ...argv);
    }
}
exports.SubSModule = SubSModule;
exports.default = exports;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7QUFLSCx5Q0FBMEM7QUFLMUMsTUFBYSxPQUFPO0lBS25COztPQUVHO0lBQ0gsWUFBWSxPQUFnQjtRQUUzQixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztJQUN4QixDQUFDO0lBRVMsU0FBUyxDQUF5QyxFQUFVLEVBQUUsTUFBVyxFQUFFLElBQVMsRUFBRSxHQUFHLElBQUk7UUFFdEcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEdBQUc7WUFFekIsYUFBYTtZQUNiLElBQUksT0FBTyxHQUFHLENBQUMsTUFBTSxJQUFJLFVBQVUsRUFDbkM7Z0JBQ0MsYUFBYTtnQkFDYixHQUFHLENBQUMsTUFBTSxFQUFFLENBQUM7YUFDYjtZQUVELE1BQU0sR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDbkMsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLE1BQU0sQ0FBQztJQUNmLENBQUM7Q0FDRDtBQTVCRCwwQkE0QkM7QUFFRCxNQUFhLFVBQVU7SUFpQnRCLFlBQVksSUFBbUIsRUFBRSxPQUFpQixFQUFFLEdBQUcsSUFBSTtRQUUxRCxJQUFJLElBQUksRUFDUjtZQUNDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQ2pCO1FBRUQsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQ2Q7WUFDQyxNQUFNLElBQUksS0FBSyxFQUFFLENBQUE7U0FDakI7UUFFRCxJQUFJLE9BQU8sRUFDWDtZQUNDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7WUFDNUIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7U0FDbkI7SUFDRixDQUFDO0lBRU0sTUFBTSxDQUFDLElBQUksQ0FBb0MsT0FBZ0IsRUFBRSxHQUFH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LElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO2FBQ3ZCO1NBQ0Q7UUFFRCxJQUFJLElBQUksRUFDUjtZQUNDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQzVCO1FBRUQsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0lBRVMsVUFBVSxDQUE0QyxLQUFVLEVBQUUsR0FBVyxFQUFFLEdBQVcsRUFBRSxJQUFPLEVBQUUsU0FBbUIsRUFBRSxJQUF5QjtRQUU1SixLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7UUFFaEUsT0FBTyxLQUFLLENBQUM7SUFDZCxDQUFDO0lBRVMsVUFBVSxDQUFpRCxJQUFPLEVBQUUsSUFBeUIsRUFBRSxXQUFrQixFQUFFLEdBQUcsSUFBSTtRQUVuSSxPQUFPLGtCQUFVLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUNyRCxDQUFDO0NBQ0Q7QUE1SUQsZ0NBNElDO0FBdUNELGtCQUFlLE9BQWlDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiAyMDE4LzIvMjEvMDIxLlxuICovXG5cbmltcG9ydCB7IFBPU1RBRyB9IGZyb20gJy4uL1BPU1RBRyc7XG5pbXBvcnQgeyBJRElDVCwgSURJQ1RfQkxBQ0tMSVNULCBJV29yZCwgU2VnbWVudCB9IGZyb20gJy4uL1NlZ21lbnQnO1xuaW1wb3J0IHsgSVdvcmREZWJ1ZywgSVdvcmREZWJ1Z0luZm8gfSBmcm9tICcuLi91dGlsL2luZGV4JztcbmltcG9ydCB7IGRlYnVnVG9rZW4gfSBmcm9tICcuLi91dGlsL2RlYnVnJ1xuaW1wb3J0IHsgRU5VTV9TVUJNT0RTX05BTUUgfSBmcm9tICcuL2luZGV4JztcblxuZXhwb3J0IHR5cGUgSVNNb2R1bGVUeXBlID0gJ29wdGltaXplcicgfCAndG9rZW5pemVyJyB8IHN0cmluZztcblxuZXhwb3J0IGNsYXNzIFNNb2R1bGUgaW1wbGVtZW50cyBJU01vZHVsZVxue1xuXHR0eXBlPzogSVNNb2R1bGVUeXBlO1xuXHRzZWdtZW50OiBTZWdtZW50O1xuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge1NlZ21lbnR9IHNlZ21lbnQg5YiG6K+N5o6l5Y+jXG5cdCAqL1xuXHRjb25zdHJ1Y3RvcihzZWdtZW50OiBTZWdtZW50KVxuXHR7XG5cdFx0dGhpcy5zZWdtZW50ID0gc2VnbWVudDtcblx0fVxuXG5cdHByb3RlY3RlZCBfZG9NZXRob2Q8UyBleHRlbmRzIElXb3JkLCBUIGV4dGVuZHMgSVN1YlNNb2R1bGU+KGZuOiBzdHJpbmcsIHRhcmdldDogU1tdLCBtb2RzOiBUW10sIC4uLmFyZ3YpXG5cdHtcblx0XHRtb2RzLmZvckVhY2goZnVuY3Rpb24gKG1vZClcblx0XHR7XG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRpZiAodHlwZW9mIG1vZC5fY2FjaGUgPT0gJ2Z1bmN0aW9uJylcblx0XHRcdHtcblx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRtb2QuX2NhY2hlKCk7XG5cdFx0XHR9XG5cblx0XHRcdHRhcmdldCA9IG1vZFtmbl0odGFyZ2V0LCAuLi5hcmd2KTtcblx0XHR9KTtcblx0XHRyZXR1cm4gdGFyZ2V0O1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBTdWJTTW9kdWxlIGltcGxlbWVudHMgSVN1YlNNb2R1bGVcbntcblx0cHVibGljIHN0YXRpYyB0eXBlOiBJU01vZHVsZVR5cGU7XG5cdHB1YmxpYyB0eXBlOiBJU01vZHVsZVR5cGU7XG5cdHNlZ21lbnQ6IFNlZ21lbnQ7XG5cblx0cHJpb3JpdHk/OiBudW1iZXI7XG5cblx0aW5pdGVkPzogYm9vbGVhbjtcblxuXHRwdWJsaWMgbmFtZTogc3RyaW5nO1xuXG5cdHByb3RlY3RlZCBfVEFCTEU/O1xuXHRwcm90ZWN0ZWQgX1BPU1RBRz86IHR5cGVvZiBQT1NUQUc7XG5cblx0cHJvdGVjdGVkIF9CTEFDS0xJU1Q/OiBJRElDVF9CTEFDS0xJU1Q7XG5cblx0Y29uc3RydWN0b3IodHlwZT86IElTTW9kdWxlVHlwZSwgc2VnbWVudD86IFNlZ21lbnQsIC4uLmFyZ3YpXG5cdHtcblx0XHRpZiAodHlwZSlcblx0XHR7XG5cdFx0XHR0aGlzLnR5cGUgPSB0eXBlO1xuXHRcdH1cblxuXHRcdGlmICghdGhpcy50eXBlKVxuXHRcdHtcblx0XHRcdHRocm93IG5ldyBFcnJvcigpXG5cdFx0fVxuXG5cdFx0aWYgKHNlZ21lbnQpXG5cdFx0e1xuXHRcdFx0dGhpcy5pbml0KHNlZ21lbnQsIC4uLmFyZ3YpO1xuXHRcdFx0dGhpcy5pbml0ZWQgPSB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgaW5pdDxUIGV4dGVuZHMgU3ViU01vZHVsZSA9IFN1YlNNb2R1bGU+KHNlZ21lbnQ6IFNlZ21lbnQsIC4uLmFyZ3YpOiBUXG5cdHtcblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0cmV0dXJuIHRoaXMuX2luaXQodGhpcywgc2VnbWVudCwgLi4uYXJndik7XG5cdH1cblxuXHRwcm90ZWN0ZWQgc3RhdGljIF9pbml0PFQgZXh0ZW5kcyBTdWJTTW9kdWxlPihsaWJUaGlzOiBJTW9kdWxlU3RhdGljPFQ+LCBzZWdtZW50OiBTZWdtZW50LCAuLi5hcmd2KTogVFxuXHR7XG5cdFx0aWYgKCFsaWJUaGlzLnR5cGUpXG5cdFx0e1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKClcblx0XHR9XG5cblx0XHRsZXQgbW9kID0gbmV3IGxpYlRoaXMobGliVGhpcy50eXBlLCBzZWdtZW50LCAuLi5hcmd2KTtcblxuXHRcdGlmICghbW9kLmluaXRlZClcblx0XHR7XG5cdFx0XHRtb2QuaW5pdChzZWdtZW50LCAuLi5hcmd2KTtcblx0XHRcdG1vZC5pbml0ZWQgPSB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHRyZXR1cm4gbW9kO1xuXHR9XG5cblx0cHVibGljIGluaXQoc2VnbWVudDogU2VnbWVudCwgLi4uYXJndilcblx0e1xuXHRcdHRoaXMuc2VnbWVudCA9IHNlZ21lbnQ7XG5cdFx0dGhpcy5pbml0ZWQgPSB0cnVlO1xuXG5cdFx0Ly90aGlzLl9jYWNoZSgpO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRwcm90ZWN0ZWQgX2NhY2hlKC4uLmFyZ3YpXG5cdHtcblx0XHR0aGlzLl9QT1NUQUcgPSB0aGlzLnNlZ21lbnQuUE9TVEFHO1xuXHR9XG5cblx0LyoqXG5cdCAqIOWbnuWCs+acgOewoeeJiOeahCBJV29yZCB7IHcsIHAsIGYsIHMgfVxuXHQgKi9cblx0cHJvdGVjdGVkIGNyZWF0ZVJhd1Rva2VuPFQgZXh0ZW5kcyBJV29yZCwgVSBleHRlbmRzIElXb3JkRGVidWdJbmZvID0gSVdvcmREZWJ1Z0luZm8+KGRhdGE6IFQsIG93PzogUGFydGlhbDxUICYgSVdvcmQ+LCBhdHRyPzogVSAmIElXb3JkRGVidWdJbmZvKVxuXHR7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdG93ID0gb3cgfHwge307XG5cblx0XHRsZXQgbncgPSB7XG5cdFx0XHR3OiB0eXBlb2YgZGF0YS53ID09ICd1bmRlZmluZWQnID8gb3cudyA6IGRhdGEudyxcblx0XHRcdHA6IHR5cGVvZiBkYXRhLnAgPT0gJ3VuZGVmaW5lZCcgPyBvdy5wIDogZGF0YS5wLFxuXHRcdFx0ZjogdHlwZW9mIGRhdGEuZiA9PSAndW5kZWZpbmVkJyA/IG93LmYgOiBkYXRhLmYsXG5cdFx0XHRzOiB0eXBlb2YgZGF0YS5zID09ICd1bmRlZmluZWQnID8gb3cucyA6IGRhdGEucyxcblx0XHR9IGFzIFQ7XG5cblx0XHRpZiAoYXR0cilcblx0XHR7XG5cdFx0XHR0aGlzLmRlYnVnVG9rZW4obncsIGF0dHIpO1xuXHRcdH1cblxuXHRcdHJldHVybiBudztcblx0fVxuXG5cdHByb3RlY3RlZCBjcmVhdGVUb2tlbjxUIGV4dGVuZHMgSVdvcmQsIFUgZXh0ZW5kcyBJV29yZERlYnVnSW5mbyA9IElXb3JkRGVidWdJbmZvPihkYXRhOiBULCBza2lwQ2hlY2s/OiBib29sZWFuLCBhdHRyPzogVSAmIElXb3JkRGVidWdJbmZvKVxuXHR7XG5cdFx0bGV0IFRBQkxFID0gdGhpcy5fVEFCTEU7XG5cblx0XHRpZiAoIXNraXBDaGVjayAmJiBUQUJMRSAmJiAhKGRhdGEudyBpbiBUQUJMRSkpXG5cdFx0e1xuXHRcdFx0dGhpcy5kZWJ1Z1Rva2VuKGRhdGEsIHtcblx0XHRcdFx0YXV0b0NyZWF0ZTogdHJ1ZSxcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vIOiHquWLleWwh+aooee1hOWQjeeoseihgOWFpSBkZWJ1ZyDos4foqIpcblx0XHRpZiAodGhpcy5uYW1lKVxuXHRcdHtcblx0XHRcdGF0dHIgPSBPYmplY3QuYXNzaWduKGF0dHIgfHwge30pO1xuXG5cdFx0XHRpZiAoISh0aGlzLm5hbWUgaW4gYXR0cikpXG5cdFx0XHR7XG5cdFx0XHRcdGF0dHJbdGhpcy5uYW1lXSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGF0dHIpXG5cdFx0e1xuXHRcdFx0dGhpcy5kZWJ1Z1Rva2VuKGRhdGEsIGF0dHIpO1xuXHRcdH1cblxuXHRcdHJldHVybiBkYXRhO1xuXHR9XG5cblx0cHJvdGVjdGVkIHNsaWNlVG9rZW48VCBleHRlbmRzIElXb3JkLCBVIGV4dGVuZHMgSVdvcmREZWJ1Z0luZm8+KHdvcmRzOiBUW10sIHBvczogbnVtYmVyLCBsZW46IG51bWJlciwgZGF0YTogVCwgc2tpcENoZWNrPzogYm9vbGVhbiwgYXR0cj86IFUgJiBJV29yZERlYnVnSW5mbylcblx0e1xuXHRcdHdvcmRzLnNwbGljZShwb3MsIGxlbiwgdGhpcy5jcmVhdGVUb2tlbihkYXRhLCBza2lwQ2hlY2ssIGF0dHIpKTtcblxuXHRcdHJldHVybiB3b3Jkcztcblx0fVxuXG5cdHByb3RlY3RlZCBkZWJ1Z1Rva2VuPFQgZXh0ZW5kcyBJV29yZERlYnVnLCBVIGV4dGVuZHMgSVdvcmREZWJ1Z0luZm8+KGRhdGE6IFQsIGF0dHI/OiBVICYgSVdvcmREZWJ1Z0luZm8sIHJldHVyblRva2VuPzogdHJ1ZSwgLi4uYXJndilcblx0e1xuXHRcdHJldHVybiBkZWJ1Z1Rva2VuKGRhdGEsIGF0dHIsIHJldHVyblRva2VuLCAuLi5hcmd2KTtcblx0fVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTdWJTTW9kdWxlTWV0aG9kPFQgZXh0ZW5kcyBJV29yZCwgVSBleHRlbmRzIElXb3JkID0gVD5cbntcblx0KHdvcmRzOiBUW10sIC4uLmFyZ3YpOiBVW10sXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVN1YlNNb2R1bGVDcmVhdGU8VCBleHRlbmRzIFN1YlNNb2R1bGUsIFIgZXh0ZW5kcyBTdWJTTW9kdWxlID0gU3ViU01vZHVsZT5cbntcblx0KHNlZ21lbnQ6IFNlZ21lbnQsIC4uLmFyZ3YpOiBUICYgUixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU01vZHVsZVxue1xuXHR0eXBlPzogSVNNb2R1bGVUeXBlLFxuXHRzZWdtZW50OiBTZWdtZW50LFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElNb2R1bGVTdGF0aWM8VCBleHRlbmRzIElTTW9kdWxlIHwgU3ViU01vZHVsZT5cbntcblx0dHlwZTogSVNNb2R1bGVUeXBlO1xuXG5cdG5ldyh0eXBlPzogSVNNb2R1bGVUeXBlLCBzZWdtZW50PzogU2VnbWVudCwgLi4uYXJndik6IFQsXG5cblx0aW5pdChzZWdtZW50OiBTZWdtZW50LCAuLi5hcmd2KTogVCxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU3ViU01vZHVsZVxue1xuXHR0eXBlOiBJU01vZHVsZVR5cGUsXG5cdHNlZ21lbnQ6IFNlZ21lbnQsXG5cblx0bmFtZT86IEVOVU1fU1VCTU9EU19OQU1FIHwgc3RyaW5nO1xuXG5cdHByaW9yaXR5PzogbnVtYmVyO1xuXG5cdGluaXQoc2VnbWVudDogU2VnbWVudCwgLi4uYXJndik6IElTdWJTTW9kdWxlLFxufVxuXG5leHBvcnQgZGVmYXVsdCBleHBvcnRzIGFzIHR5cGVvZiBpbXBvcnQoJy4vbW9kJyk7XG4iXX0=