"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useModules = exports._warnIgnoreModules = exports._isIgnoreModules = void 0;
function _isIgnoreModules(me, mod, ...argv) {
    return (me.options && me.options.disableModules && me.options.disableModules.includes(mod));
}
exports._isIgnoreModules = _isIgnoreModules;
function _warnIgnoreModules(mod) {
    console.warn(`can't use this mod, because it got disable: ${mod}`);
}
exports._warnIgnoreModules = _warnIgnoreModules;
function useModules(me, mod, ...argv) {
    if (_isIgnoreModules(me, mod, ...argv)) {
        _warnIgnoreModules(mod);
    }
    else {
        // 初始化并注册模块
        let c = mod.init(me, ...argv);
        if (typeof c !== 'undefined') {
            mod = c;
        }
        // @ts-ignore
        me.modules[mod.type].push(mod);
    }
    return me;
}
exports.useModules = useModules;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlTW9kdWxlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInVzZU1vZHVsZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBS0EsU0FBZ0IsZ0JBQWdCLENBQXdCLEVBQUssRUFBRSxHQUF3QyxFQUFFLEdBQUcsSUFBSTtJQUUvRyxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLGNBQWMsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtBQUM1RixDQUFDO0FBSEQsNENBR0M7QUFFRCxTQUFnQixrQkFBa0IsQ0FBQyxHQUFHO0lBRXJDLE9BQU8sQ0FBQyxJQUFJLENBQUMsK0NBQStDLEdBQUcsRUFBRSxDQUFDLENBQUE7QUFDbkUsQ0FBQztBQUhELGdEQUdDO0FBRUQsU0FBZ0IsVUFBVSxDQUFJLEVBQUssRUFBRSxHQUF3QyxFQUFFLEdBQUcsSUFBSTtJQUVyRixJQUFJLGdCQUFnQixDQUFDLEVBQVMsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFDN0M7UUFDQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQTtLQUN2QjtTQUVEO1FBQ0MsV0FBVztRQUNYLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFFOUIsSUFBSSxPQUFPLENBQUMsS0FBSyxXQUFXLEVBQzVCO1lBQ0MsR0FBRyxHQUFHLENBQUMsQ0FBQztTQUNSO1FBRUQsYUFBYTtRQUNiLEVBQUUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUMvQjtJQUVELE9BQU8sRUFBRSxDQUFDO0FBQ1gsQ0FBQztBQXJCRCxnQ0FxQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJT3B0aW9uc1NlZ21lbnQgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgU2VnbWVudENvcmUgZnJvbSAnLi4vY29yZSc7XG5pbXBvcnQgeyBJU3ViT3B0aW1pemVyIH0gZnJvbSAnLi4vLi4vbW9kL09wdGltaXplcic7XG5pbXBvcnQgeyBJU3ViVG9rZW5pemVyIH0gZnJvbSAnLi4vLi4vbW9kL1Rva2VuaXplcic7XG5cbmV4cG9ydCBmdW5jdGlvbiBfaXNJZ25vcmVNb2R1bGVzPFQgZXh0ZW5kcyBTZWdtZW50Q29yZT4obWU6IFQsIG1vZDogSVN1Yk9wdGltaXplciB8IElTdWJUb2tlbml6ZXIgfCBhbnksIC4uLmFyZ3YpXG57XG5cdHJldHVybiAobWUub3B0aW9ucyAmJiBtZS5vcHRpb25zLmRpc2FibGVNb2R1bGVzICYmIG1lLm9wdGlvbnMuZGlzYWJsZU1vZHVsZXMuaW5jbHVkZXMobW9kKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF93YXJuSWdub3JlTW9kdWxlcyhtb2QpXG57XG5cdGNvbnNvbGUud2FybihgY2FuJ3QgdXNlIHRoaXMgbW9kLCBiZWNhdXNlIGl0IGdvdCBkaXNhYmxlOiAke21vZH1gKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlTW9kdWxlczxUPihtZTogVCwgbW9kOiBJU3ViT3B0aW1pemVyIHwgSVN1YlRva2VuaXplciB8IGFueSwgLi4uYXJndilcbntcblx0aWYgKF9pc0lnbm9yZU1vZHVsZXMobWUgYXMgYW55LCBtb2QsIC4uLmFyZ3YpKVxuXHR7XG5cdFx0X3dhcm5JZ25vcmVNb2R1bGVzKG1vZClcblx0fVxuXHRlbHNlXG5cdHtcblx0XHQvLyDliJ3lp4vljJblubbms6jlhozmqKHlnZdcblx0XHRsZXQgYyA9IG1vZC5pbml0KG1lLCAuLi5hcmd2KTtcblxuXHRcdGlmICh0eXBlb2YgYyAhPT0gJ3VuZGVmaW5lZCcpXG5cdFx0e1xuXHRcdFx0bW9kID0gYztcblx0XHR9XG5cblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0bWUubW9kdWxlc1ttb2QudHlwZV0ucHVzaChtb2QpO1xuXHR9XG5cblx0cmV0dXJuIG1lO1xufVxuIl19